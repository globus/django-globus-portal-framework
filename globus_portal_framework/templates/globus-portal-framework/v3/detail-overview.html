{% extends 'globus-portal-framework/v3/detail-base.html' %}
{% load render_options index_template srcdoc %}


{% block breadcrumb_items %}
<li class="breadcrumb-item"><a class="h5" href="{% url 'index-selection' %}">{{globus_portal_framework.project_title}}</a></li>
<li class="breadcrumb-item"><a class="h5" href="{% url 'search' globus_portal_framework.index %}">{{globus_portal_framework.index_data.name}}</a></li>
<li class="breadcrumb-item active"><a class="h5">{{title|default:'Result Details'}}</a></li>
{% endblock %}


{% block detail_body %}

<div class="row">
  <div class="col-md-12">

        {% block detail_search_content %}
        {% if result.dc or result.files or result.project_metadata  %}
        <h3 class="text-center mb-5">General Info</h3>
        {% with all|first as result %}
        <div class="row">
          <div class="col-md-6">
            {% include 'globus-portal-framework/v3/components/detail-dc-metadata.html' %}
          </div>
          <div class="col-md-6">
            {% include 'globus-portal-framework/v3/components/detail-general-metadata.html' %}
          </div>
        </div>
        {% endwith %}

        {% else %}

        <p>
          This the default built-in detail page for Globus Portal Framework.
          Create a file named <i>templates/globus-portal-framework/v3/detail-overview.html</i>
          to override this template with your own, so you can customize this page to your liking.
          <br><br>
          Also, checkout the docs on 'fields' for Globus Portal Framework, which will tell you
          how to configure the Transfer/Download/Link buttons above.
        </p>
        <h3 class="text-center mb-5">Default Detail Page</h3>
        {% with all|first as project_metadata %}
        {% include 'globus-portal-framework/v3/components/detail-general-metadata.html' %}
        {% endwith %}
        {% endif %}
        {% endblock %}

      {% render_options is_authenticated=request.user.is_authenticated url=preview_url collection_id=preview_collection path=preview_path as ro %}
      {% index_template 'globus-portal-framework/v3/detail-render-asset.html' as it_render %}
      {% block detail_preview %}
        {% if collection_id and path or url %}
          {#  If you know that your page will only be used with public assets, remove `allow-same-origin` from the sandbox for added security #}
          <iframe
            sandbox="allow-same-origin allow-scripts allow-downloads"
            srcdoc="{% srcdoc %}{% include it_render with render_options=ro only %}{% endsrcdoc %}"
            width="100%"
            height="100%"></iframe>
        {% endif %}
      {% endblock %}
  </div>
</div>

{% endblock %}