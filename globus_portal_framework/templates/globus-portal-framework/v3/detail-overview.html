{% extends 'globus-portal-framework/v3/detail-base.html' %}


{% block breadcrumb_items %}
<li class="breadcrumb-item"><a class="h5" href="{% url 'index-selection' %}">{{globus_portal_framework.project_title}}</a></li>
<li class="breadcrumb-item"><a class="h5" href="{% url 'search' globus_portal_framework.index %}">{{globus_portal_framework.index_data.name}}</a></li>
<li class="breadcrumb-item active"><a class="h5">{{title|default:'Result Details'}}</a></li>
{% endblock %}


{% block detail_body %}

<div class="row">
  <div class="col-md-12">

        {% block detail_search_content %}
        {% if result.dc or result.files or result.project_metadata  %}
        <h3 class="text-center mb-5">General Info</h3>
        {% with all|first as result %}
        <div class="row">
          <div class="col-md-6">
            {% include 'globus-portal-framework/v3/components/detail-dc-metadata.html' %}
          </div>
          <div class="col-md-6">
            {% include 'globus-portal-framework/v3/components/detail-general-metadata.html' %}
          </div>
        </div>
        {% endwith %}

        {% else %}

        <p>
          This the default built-in detail page for Globus Portal Framework.
          Create a file named <i>templates/globus-portal-framework/v3/detail-overview.html</i>
          to override this template with your own, so you can customize this page to your liking.
          <br><br>
          Also, checkout the docs on 'fields' for Globus Portal Framework, which will tell you
          how to configure the Transfer/Download/Link buttons above.
        </p>
        <h3 class="text-center mb-5">Default Detail Page</h3>
        {% with all|first as project_metadata %}
        {% include 'globus-portal-framework/v3/components/detail-general-metadata.html' %}
        {% endwith %}
        {% endif %}
        {% endblock %}

{#  {% block detail_preview %}#}
{#    <iframe#}
{#      sandbox="allow-same-origin allow-scripts allow-downloads"#}
{#      src="{% url 'render-asset' %}?collection_id={{ preview_url }}"#}
{#      width="{{ width | default_if_none: "100%" }}"#}
{#      height="{{ height | default_if_none: "100%" }}"></iframe>#}
{#  {% endblock %}#}


  {% load render_options %}
  {{ all.0 }}
  {{ all.0.sample_file_url }}
  {%  render_options url=all.0.sample_file_url as ro %}
  render options!!
  {{ ro }}



  {%  if preview_url %}
    {#  Initial detail page only supports embedding public URLs, though backend API allows collection_id/path syntax #}
    {# Adjust sandboxing options if embedding, eg, PDFs #}
    {% url 'render_asset' as render_url %}
    <iframe
      sandbox="allow-same-origin allow-scripts allow-downloads"
      src="{{ render_url }}?url={{ preview_url | urlencode }}"
      width="100%"
      height="500px"></iframe>
  {% endif %}
  </div>
</div>

{% endblock %}